{"version":3,"sources":["deferred.js"],"names":[],"mappings":"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","file":"deferred-compiled.js","sourcesContent":["define( [\r\n\t\"./core\",\r\n\t\"./var/slice\",\r\n\t\"./callbacks\"\r\n], function( jQuery, slice ) {\r\n\r\njQuery.extend( {\r\n\r\n\tDeferred: function( func ) {\r\n\t\tvar tuples = [\r\n\r\n\t\t\t\t// action, add listener, listener list, final state\r\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ), \"resolved\" ],\r\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ), \"rejected\" ],\r\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ) ]\r\n\t\t\t],\r\n\t\t\tstate = \"pending\",\r\n\t\t\tpromise = {\r\n\t\t\t\tstate: function() {\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t},\r\n\t\t\t\talways: function() {\r\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t},\r\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\r\n\t\t\t\t\tvar fns = arguments;\r\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\r\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\r\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\r\n\r\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\r\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\r\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\r\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\r\n\t\t\t\t\t\t\t\t\treturned.promise()\r\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\r\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\r\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\r\n\t\t\t\t\t\t\t\t\t\tthis === promise ? newDefer.promise() : this,\r\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tfns = null;\r\n\t\t\t\t\t} ).promise();\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Get a promise for this deferred\r\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\r\n\t\t\t\tpromise: function( obj ) {\r\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdeferred = {};\r\n\r\n\t\t// Keep pipe for back-compat\r\n\t\tpromise.pipe = promise.then;\r\n\r\n\t\t// Add list-specific methods\r\n\t\tjQuery.each( tuples, function( i, tuple ) {\r\n\t\t\tvar list = tuple[ 2 ],\r\n\t\t\t\tstateString = tuple[ 3 ];\r\n\r\n\t\t\t// promise[ done | fail | progress ] = list.add\r\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\r\n\r\n\t\t\t// Handle state\r\n\t\t\tif ( stateString ) {\r\n\t\t\t\tlist.add( function() {\r\n\r\n\t\t\t\t\t// state = [ resolved | rejected ]\r\n\t\t\t\t\tstate = stateString;\r\n\r\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\r\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\r\n\t\t\t}\r\n\r\n\t\t\t// deferred[ resolve | reject | notify ]\r\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\r\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? promise : this, arguments );\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\r\n\t\t} );\r\n\r\n\t\t// Make the deferred a promise\r\n\t\tpromise.promise( deferred );\r\n\r\n\t\t// Call given func if any\r\n\t\tif ( func ) {\r\n\t\t\tfunc.call( deferred, deferred );\r\n\t\t}\r\n\r\n\t\t// All done!\r\n\t\treturn deferred;\r\n\t},\r\n\r\n\t// Deferred helper\r\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\r\n\t\tvar i = 0,\r\n\t\t\tresolveValues = slice.call( arguments ),\r\n\t\t\tlength = resolveValues.length,\r\n\r\n\t\t\t// the count of uncompleted subordinates\r\n\t\t\tremaining = length !== 1 ||\r\n\t\t\t\t( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\r\n\r\n\t\t\t// the master Deferred.\r\n\t\t\t// If resolveValues consist of only a single Deferred, just use that.\r\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\r\n\r\n\t\t\t// Update function for both resolve and progress values\r\n\t\t\tupdateFunc = function( i, contexts, values ) {\r\n\t\t\t\treturn function( value ) {\r\n\t\t\t\t\tcontexts[ i ] = this;\r\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\r\n\t\t\t\t\tif ( values === progressValues ) {\r\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\r\n\t\t\t\t\t} else if ( !( --remaining ) ) {\r\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tprogressValues, progressContexts, resolveContexts;\r\n\r\n\t\t// Add listeners to Deferred subordinates; treat others as resolved\r\n\t\tif ( length > 1 ) {\r\n\t\t\tprogressValues = new Array( length );\r\n\t\t\tprogressContexts = new Array( length );\r\n\t\t\tresolveContexts = new Array( length );\r\n\t\t\tfor ( ; i < length; i++ ) {\r\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\r\n\t\t\t\t\tresolveValues[ i ].promise()\r\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) )\r\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\r\n\t\t\t\t\t\t.fail( deferred.reject );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t--remaining;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If we're not waiting on anything, resolve the master\r\n\t\tif ( !remaining ) {\r\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\r\n\t\t}\r\n\r\n\t\treturn deferred.promise();\r\n\t}\r\n} );\r\n\r\nreturn jQuery;\r\n} );\r\n"]}