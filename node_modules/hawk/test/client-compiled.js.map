{"version":3,"sources":["client.js"],"names":[],"mappings":"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","file":"client-compiled.js","sourcesContent":["// Load modules\r\n\r\nvar Url = require('url');\r\nvar Code = require('code');\r\nvar Hawk = require('../lib');\r\nvar Lab = require('lab');\r\n\r\n\r\n// Declare internals\r\n\r\nvar internals = {};\r\n\r\n\r\n// Test shortcuts\r\n\r\nvar lab = exports.lab = Lab.script();\r\nvar describe = lab.experiment;\r\nvar it = lab.test;\r\nvar expect = Code.expect;\r\n\r\n\r\ndescribe('Client', function () {\r\n\r\n    describe('header()', function () {\r\n\r\n        it('returns a valid authorization header (sha1)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var header = Hawk.client.header('http://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, ext: 'Bazinga!', timestamp: 1353809207, nonce: 'Ygvqdz', payload: 'something to write about' }).field;\r\n            expect(header).to.equal('Hawk id=\"123456\", ts=\"1353809207\", nonce=\"Ygvqdz\", hash=\"bsvY3IfUllw6V5rvk4tStEvpBhE=\", ext=\"Bazinga!\", mac=\"qbf1ZPG/r/e06F4ht+T77LXi5vw=\"');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid authorization header (sha256)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, ext: 'Bazinga!', timestamp: 1353809207, nonce: 'Ygvqdz', payload: 'something to write about', contentType: 'text/plain' }).field;\r\n            expect(header).to.equal('Hawk id=\"123456\", ts=\"1353809207\", nonce=\"Ygvqdz\", hash=\"2QfCt3GuY9HQnHWyWD3wX68ZOKbynqlfYmuO2ZBRqtY=\", ext=\"Bazinga!\", mac=\"q1CwFoSHzPZSkbIvl0oYlD+91rBUEvFk763nMjMndj8=\"');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid authorization header (no ext)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, timestamp: 1353809207, nonce: 'Ygvqdz', payload: 'something to write about', contentType: 'text/plain' }).field;\r\n            expect(header).to.equal('Hawk id=\"123456\", ts=\"1353809207\", nonce=\"Ygvqdz\", hash=\"2QfCt3GuY9HQnHWyWD3wX68ZOKbynqlfYmuO2ZBRqtY=\", mac=\"HTgtd0jPI6E4izx8e4OHdO36q00xFCU0FolNq3RiCYs=\"');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid authorization header (null ext)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, timestamp: 1353809207, nonce: 'Ygvqdz', payload: 'something to write about', contentType: 'text/plain', ext: null }).field;\r\n            expect(header).to.equal('Hawk id=\"123456\", ts=\"1353809207\", nonce=\"Ygvqdz\", hash=\"2QfCt3GuY9HQnHWyWD3wX68ZOKbynqlfYmuO2ZBRqtY=\", mac=\"HTgtd0jPI6E4izx8e4OHdO36q00xFCU0FolNq3RiCYs=\"');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid authorization header (empty payload)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, timestamp: 1353809207, nonce: 'Ygvqdz', payload: '', contentType: 'text/plain' }).field;\r\n            expect(header).to.equal('Hawk id=\\\"123456\\\", ts=\\\"1353809207\\\", nonce=\\\"Ygvqdz\\\", hash=\\\"q/t+NNAkQZNlq/aAD6PlexImwQTxwgT2MahfTa9XRLA=\\\", mac=\\\"U5k16YEzn3UnBHKeBzsDXn067Gu3R4YaY6xOt9PYRZM=\\\"');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid authorization header (pre hashed payload)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var options = { credentials: credentials, timestamp: 1353809207, nonce: 'Ygvqdz', payload: 'something to write about', contentType: 'text/plain' };\r\n            options.hash = Hawk.crypto.calculatePayloadHash(options.payload, credentials.algorithm, options.contentType);\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', options).field;\r\n            expect(header).to.equal('Hawk id=\"123456\", ts=\"1353809207\", nonce=\"Ygvqdz\", hash=\"2QfCt3GuY9HQnHWyWD3wX68ZOKbynqlfYmuO2ZBRqtY=\", mac=\"HTgtd0jPI6E4izx8e4OHdO36q00xFCU0FolNq3RiCYs=\"');\r\n            done();\r\n        });\r\n\r\n        it('errors on missing uri', function (done) {\r\n\r\n            var header = Hawk.client.header('', 'POST');\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid argument type');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid uri', function (done) {\r\n\r\n            var header = Hawk.client.header(4, 'POST');\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid argument type');\r\n            done();\r\n        });\r\n\r\n        it('errors on missing method', function (done) {\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', '');\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid argument type');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid method', function (done) {\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 5);\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid argument type');\r\n            done();\r\n        });\r\n\r\n        it('errors on missing options', function (done) {\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST');\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid argument type');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid credentials (id)', function (done) {\r\n\r\n            var credentials = {\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, ext: 'Bazinga!', timestamp: 1353809207 });\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid credential object');\r\n            done();\r\n        });\r\n\r\n        it('errors on missing credentials', function (done) {\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { ext: 'Bazinga!', timestamp: 1353809207 });\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid credential object');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid credentials', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, ext: 'Bazinga!', timestamp: 1353809207 });\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Invalid credential object');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid algorithm', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'hmac-sha-0'\r\n            };\r\n\r\n            var header = Hawk.client.header('https://example.net/somewhere/over/the/rainbow', 'POST', { credentials: credentials, payload: 'something, anything!', ext: 'Bazinga!', timestamp: 1353809207 });\r\n            expect(header.field).to.equal('');\r\n            expect(header.err).to.equal('Unknown algorithm');\r\n            done();\r\n        });\r\n    });\r\n\r\n    describe('authenticate()', function () {\r\n\r\n        it('returns false on invalid header', function (done) {\r\n\r\n            var res = {\r\n                headers: {\r\n                    'server-authorization': 'Hawk mac=\"abc\", bad=\"xyz\"'\r\n                }\r\n            };\r\n\r\n            expect(Hawk.client.authenticate(res, {})).to.equal(false);\r\n            done();\r\n        });\r\n\r\n        it('returns false on invalid mac', function (done) {\r\n\r\n            var res = {\r\n                headers: {\r\n                    'content-type': 'text/plain',\r\n                    'server-authorization': 'Hawk mac=\"_IJRsMl/4oL+nn+vKoeVZPdCHXB4yJkNnBbTbHFZUYE=\", hash=\"f9cDF/TDm7TkYRLnGwRMfeDzT6LixQVLvrIKhh0vgmM=\", ext=\"response-specific\"'\r\n                }\r\n            };\r\n\r\n            var artifacts = {\r\n                method: 'POST',\r\n                host: 'example.com',\r\n                port: '8080',\r\n                resource: '/resource/4?filter=a',\r\n                ts: '1362336900',\r\n                nonce: 'eb5S_L',\r\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\r\n                ext: 'some-app-data',\r\n                app: undefined,\r\n                dlg: undefined,\r\n                mac: 'BlmSe8K+pbKIb6YsZCnt4E1GrYvY1AaYayNR82dGpIk=',\r\n                id: '123456'\r\n            };\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\r\n                algorithm: 'sha256',\r\n                user: 'steve'\r\n            };\r\n\r\n            expect(Hawk.client.authenticate(res, credentials, artifacts)).to.equal(false);\r\n            done();\r\n        });\r\n\r\n        it('returns true on ignoring hash', function (done) {\r\n\r\n            var res = {\r\n                headers: {\r\n                    'content-type': 'text/plain',\r\n                    'server-authorization': 'Hawk mac=\"XIJRsMl/4oL+nn+vKoeVZPdCHXB4yJkNnBbTbHFZUYE=\", hash=\"f9cDF/TDm7TkYRLnGwRMfeDzT6LixQVLvrIKhh0vgmM=\", ext=\"response-specific\"'\r\n                }\r\n            };\r\n\r\n            var artifacts = {\r\n                method: 'POST',\r\n                host: 'example.com',\r\n                port: '8080',\r\n                resource: '/resource/4?filter=a',\r\n                ts: '1362336900',\r\n                nonce: 'eb5S_L',\r\n                hash: 'nJjkVtBE5Y/Bk38Aiokwn0jiJxt/0S2WRSUwWLCf5xk=',\r\n                ext: 'some-app-data',\r\n                app: undefined,\r\n                dlg: undefined,\r\n                mac: 'BlmSe8K+pbKIb6YsZCnt4E1GrYvY1AaYayNR82dGpIk=',\r\n                id: '123456'\r\n            };\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\r\n                algorithm: 'sha256',\r\n                user: 'steve'\r\n            };\r\n\r\n            expect(Hawk.client.authenticate(res, credentials, artifacts)).to.equal(true);\r\n            done();\r\n        });\r\n\r\n        it('fails on invalid WWW-Authenticate header format', function (done) {\r\n\r\n            var header = 'Hawk ts=\"1362346425875\", tsm=\"PhwayS28vtnn3qbv0mqRBYSXebN/zggEtucfeZ620Zo=\", x=\"Stale timestamp\"';\r\n            expect(Hawk.client.authenticate({ headers: { 'www-authenticate': header } }, {})).to.equal(false);\r\n            done();\r\n        });\r\n\r\n        it('fails on invalid WWW-Authenticate header format', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\r\n                algorithm: 'sha256',\r\n                user: 'steve'\r\n            };\r\n\r\n            var header = 'Hawk ts=\"1362346425875\", tsm=\"hwayS28vtnn3qbv0mqRBYSXebN/zggEtucfeZ620Zo=\", error=\"Stale timestamp\"';\r\n            expect(Hawk.client.authenticate({ headers: { 'www-authenticate': header } }, credentials)).to.equal(false);\r\n            done();\r\n        });\r\n\r\n        it('skips tsm validation when missing ts', function (done) {\r\n\r\n            var header = 'Hawk error=\"Stale timestamp\"';\r\n            expect(Hawk.client.authenticate({ headers: { 'www-authenticate': header } }, {})).to.equal(true);\r\n            done();\r\n        });\r\n    });\r\n\r\n    describe('message()', function () {\r\n\r\n        it('generates authorization', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 80, 'I am the boodyman', { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.exist();\r\n            expect(auth.ts).to.equal(1353809207);\r\n            expect(auth.nonce).to.equal('abc123');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid host', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message(5, 80, 'I am the boodyman', { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid port', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', '80', 'I am the boodyman', { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on missing host', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 0, 'I am the boodyman', { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on null message', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 80, null, { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on missing message', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 80, undefined, { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid message', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 80, 5, { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on missing options', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 80, 'I am the boodyman');\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid credentials (id)', function (done) {\r\n\r\n            var credentials = {\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 80, 'I am the boodyman', { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid credentials (key)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                algorithm: 'sha1'\r\n            };\r\n\r\n            var auth = Hawk.client.message('example.com', 80, 'I am the boodyman', { credentials: credentials, timestamp: 1353809207, nonce: 'abc123' });\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n    });\r\n});\r\n"]}